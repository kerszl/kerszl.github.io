---
title: "Kioptrix: Level 1.1 (#2)"
categories:
  - hacking vulnhub
tags:
  - Hacking
  - vulnhub
---
# Wstęp
Po przeczytaniu książek o hackingu 
[Metasploit wydanie I i II](https://www.goodreads.com/book/show/19274492-metasploit-penetration-testing-cookbook-second-edition), [Kali Linux. Testy penetracyjne. Wydanie III](https://www.goodreads.com/book/show/39211056-web-penetration-testing-with-kali-linux), [Kali linux - testy bezpieczeństwa](https://www.goodreads.com/book/show/53328771-kali-linux-testy-bezpiecze-stwa-testy-penetracyjne-i-etyczne-hakowanie), [bezpieczeństwo aplikacji webowych](https://www.goodreads.com/book/show/48718398-bezpiecze-stwo-aplikacji-webowych), wypadałoby zacząć wykorzystywać swoją wiedzę i zamienić ją w praktykę. W jednej z książek był wspomniany wspaniały serwis [vulnhub](https://www.vulnhub.com/), gdzie jest masa podatnych wirtualek, które można ściągnąć i spróbować się na nie włamać. Ja do tego używam serwera postawionego na XCP-NG/Xenserver (ver 8.1) na serwerze, który kiedyś kupiłem. Może kiedyś opiszę instalację, chociaż jest ona bardzo łatwa. Wracając do rzeczy, czemu zdecydowałem się akurat opisać włamanie na dosyć starą wirtualkę Kioptrix: Level 1.1 (#2)? Ostatni opis jest z 2007 roku i screeny nie odpowiadają już rzeczywistości. Przeglądarki internetowe źle wyświetlają formularze z tego obrazu, więc trochę inaczej trzeba się włamać na to.


# Czynności wstępne
Po ściągnięciu [obrazu](https://www.vulnhub.com/entry/kioptrix-level-11-2,23/) i zainstalowaniu zabieramy się za pentesting. Uruchamiamy wirtualkę i pierwszym krokiem, to jest ustalenie ip maszyny atakowanej. W xcp-ng center można zobaczyć adres mak maszyny wirtualnej, ale jeżeli nie używamy xcp-ng i mamy odpaloną tylko jedną wirtualkę, to mak też znajdziemy. Zakładam, na obrazie z którego atakujecie że jest zainstalowany Metasploit, a najlepiej jakby to był Kali.

![xcp](/assets/images/kioptrix-1.1/01.png)

Zakładam, że jest już znany przynajmniej częściowo Metasploit i jest już połączenie z bazą Metasploita. Być może jakieś podstawy opiszę w którymś z postów.
```
#odpalamy konsole Metasploita
msfconsole
#tworzymy profil
workspace -a kioptrix_v2
#skanujemy sieć w poszukiwaniu naszego obrazu, używamy szybkiego skanowania
db_nmap -sn 172.16.1.0/24
#wypisujemy hosty, które są w naszej bazie
hosts
#szukamy nasz obraz przez adres mak
grep -i BE:C4:50:31:E5:BA hosts
#dokładnie skanujemy nasz obraz
db_nmap -A 172.16.1.238
#wypisujemy usługi które są na naszym serwerze
services
```

![services](/assets/images/kioptrix-1.1/02.png)

Z ciekawszych rzeczy, to widzimy, że Mysql jest na standardowym porcie 3306, niestety, nie wiadomo jaka to jest wersja Mysql-a.
Komenda w msfconsle nie zwraca nam nic ciekawego. 
```
msf6 auxiliary(scanner/http/error_sql_injection) > use auxiliary/scanner/mysql/mysql_version
msf6 auxiliary(scanner/mysql/mysql_version) > run

[*] 172.16.1.238:3306     - 172.16.1.238:3306 is running MySQL, but responds with an error: \x04Host '172.16.1.10' is not allowed to connect to this MySQL server
[*] 172.16.1.238:3306     - Scanned 1 of 1 hosts (100% complete)
[*] Auxiliary module execution completed
```

Widzimy również Apache na 80 porcie. Wejdźmy na stronę.
```
http://172.16.1.238/
```
Ukazuje się nam panel z loginem i hasłem.


Próby z łatwymi hasłami nie działają. 




