---
title: "Jak uruchomiÄ‡ Kioptrix: Level 1.0 (#1) na XCP-ng"
excerpt: " "
comments: true
categories:
  - Vulnhub
tags:
  - Hacking
  - Vulnhub
header:
  overlay_image: /assets/images/pasek.png
---
# WstÄ™p
Od razu piszÄ™, Å¼e nie bÄ™dÄ™ pisaÄ‡ krok po kroku i niektÃ³re fragmenty, co naleÅ¼y uczyniÄ‡, to bÄ™dÄ™ przeskakiwaÅ‚, ale zakÅ‚adam, Å¼e czytelnik jest na tyle inteligentny, Å¼e sobie poradzi. Tym razem nie bÄ™dÄ™ opisywaÅ‚, jak siÄ™ wÅ‚amaÄ‡ na [Kioptrix: Level 1.0](https://www.vulnhub.com/entry/kioptrix-level-1-1,22/), ale jak go w ogÃ³le poprawnie uruchomiÄ‡ na **XCP-NG**. Jest to dosyÄ‡ stary system, pierwszy wpis o nim jest z **17 Feb 2010**, ale kernel jest jeszcze starszy. System bazuje na **Red Hat Linux release 7.2 (Enigma)**. Niestety po uruchomieniu systemu karta sieciowa nie jest widoczna. PrÃ³bowaÅ‚em wejÅ›Ä‡ przez GRUB-a, ale po prostu nie mogÅ‚em. Za szybko znika ekran z oknem GRUB-a. Trzeba wiÄ™c to zrobiÄ‡ innÄ… metodÄ….
{: .text-justify}
## Podpinamy dysk
ZakÅ‚adam, Å¼e wirtualka juÅ¼ Å›ciÄ…gniÄ™ta i zainstalowana. Na samym poczÄ…tku naleÅ¼y jÄ… wyÅ‚Ä…czyÄ‡ i odpiÄ…Ä‡ dysk. Robimy to, naciskajÄ…c przez przycisk _Detach_, a nastÄ™pnie w Kali naleÅ¼y go dodaÄ‡ przez przycisk _Attach disc_. DobrÄ… praktykÄ… jest nazywanie dyskÃ³w. Nazwa typu dysk1 lub dysk2 duÅ¼o nam nie powie, jeÅ¼eli trzeba bÄ™dzie znowu podÅ‚Ä…czyÄ‡ dysk.

![obraz](https://user-images.githubusercontent.com/45152848/121776046-21080b00-cb8b-11eb-8764-6a842559e3b9.png)

Przy okazji maÅ‚a dygresja. RobiÄ…c screena i wklejajÄ…c tutaj z komputera Github przydzieliÅ‚ mi miejsce na **user-images.githubusercontent.com** i wrzuciÅ‚ tam mÃ³j zrzut. ğŸ˜„ Nawet nie muszÄ™ kombinowaÄ‡ z wrzucaniem do repozytorium. Jednak uwaÅ¼acie, Å¼eby coÅ› waÅ¼nego tak nie wkleiÄ‡ ğŸ˜¸
{: .text-justify}
---
WiÄ™c zaczynamy.
Przechodzimy do Kali, sprawdzamy czy jest nowy dysk.

```bash
root@kali:/home/szikers# lsblk
NAME    MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sr0      11:0    1  1024M  0 rom
xvda    202:0    0    25G  0 disk
â”œâ”€xvda1 202:1    0    24G  0 part /
â”œâ”€xvda2 202:2    0     1K  0 part
â””â”€xvda5 202:5    0   975M  0 part [SWAP]
xvdb    202:16   0     3G  0 disk
â”œâ”€xvdb1 202:17   0  51.2M  0 part
â”œâ”€xvdb2 202:18   0   1.5G  0 part
â”œâ”€xvdb3 202:19   0 563.1M  0 part
â”œâ”€xvdb4 202:20   0     1K  0 part
â”œâ”€xvdb5 202:21   0 385.8M  0 part
â”œâ”€xvdb6 202:22   0 275.6M  0 part
â””â”€xvdb7 202:23   0 255.9M  0 part
```
Wow, ale tych partycji na xvdb
```bash
root@kali:/home/szikers# file -s /dev/xvdb1
/dev/xvdb1: Linux rev 1.0 ext3 filesystem data, UUID=33e8eeb8-aa7f-11de-84f4-9ffd872f0d4d (needs journal recovery)
```
Pierwsza Partycja jest na ext3. Montujemy i wchodzimy i sprawdzamy co tam jest
{: .text-justify}
```bash
root@kali:/# mount /dev/xvdb1 /mnt/xvdb1/
root@kali:/# ls
aj.jpg  boot  etc   initrd.img      lib    lib64   lost+found  mnt  proc  run   srv  tmp  var      vmlinuz.old
bin     dev   home  initrd.img.old  lib32  libx32  media       opt  root  sbin  sys  usr  vmlinuz
```

WyglÄ…da tylko na partycjÄ™ z **GRUB**, sprawdÅ¼my konfiguracjÄ™ **GRUB-a**
{: .text-justify}

```bash
root@kali:/mnt/xvdb1# cat grub/grub.conf
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/hda5
#          initrd /initrd-version.img

#boot=/dev/hda
default=0
timeout=0
;splashimage=(hd0,0)/grub/splash.xpm.gz
title Red Hat Linux (Kioptrix Level 1)
        root (hd0,0)
        kernel /vmlinuz-2.4.7-10 ro root=/dev/hda5
        initrd /initrd-2.4.7-10.img
```
Linux Å‚aduje siÄ™ z piÄ…tej partycji. Kasujemy hasÅ‚o z /etc/shadows, Å¼eby moÅ¼na byÅ‚o wejÅ›Ä‡ na root-a i sprawdziÄ‡, co z tÄ… sieciÃ³wkÄ…. PoniÅ¼ej jest pokazane jak wyglÄ…da root z hasÅ‚em i bez
{: .text-justify}

```bash
root:$1$XROmcfDX$tF93GqnLHOJeGRHpaNyIs0:14513:0:99999:7:::
root::14513:0:99999:7:::
```

Odmontowujemy
```bash
umount /dev/xvdb1
umount /dev/xvdb5
``` 

"Wysuwamy" obraz z Kali (podczas montowania i odmontowania dysku do Kali, nie musimy go resetowaÄ‡) i podÅ‚Ä…czamy go z powrotem do Kiopixa 
{: .text-justify}

![obraz](https://user-images.githubusercontent.com/45152848/121777143-c671ad80-cb90-11eb-9a27-580918cf36b1.png)

NastÄ™pnie zamieniamy wpis w _/etc/sysconfig/network-scripts/ifcfg-eth1_
Zmieniamy _eth1_ na _eth0_
{: .notice--danger}
Nie pytajcie mnie czemu trzeba tak zrobiÄ‡, ale na Kiopixie jest stary kernel 2.x i XCP-ng, a to nie jest dobre poÅ‚Ä…czenie. Po wylistowaniu zawartoÅ›ci, powinno to tak wyglÄ…daÄ‡
{: .text-justify}

```bash
[root@kioptrix /]# cat /etc/sysconfig/network-scripts/ifcfg-eth1
DEVICE=eth0
BOOTPROTO=dhcp
ONBOOT=yes
```

Reboot i moÅ¼emy siÄ™ cieszyÄ‡ hackowaniem **Kioptrix: Level 1.0 (#1)**. ResztÄ™ zostawiam juÅ¼ Wam.
{: .notice--success}



